"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[5571],{99338:function(e,t,n){var s=n(15671),i=n(43144),a=n(60136),o=n(29388),r=n(47313),l=n(42995),c=n(12756),h=n(12213),d=n(54105),u=n(85951),m=n(5684),g=n(7764),p=n(21303),f=n(61805),x=n(46417),v=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).toggle=function(){i.props.toggleDialog()},i.executeOperation=function(){i.toggle(),i.props.executeOperation(i.state.isChecked)},i.onInputChange=function(e){i.setState({isChecked:e.target.checked})},i.state={isChecked:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,x.jsxs)(l.Z,{isOpen:!0,toggle:this.toggle,children:[(0,x.jsx)(c.Z,{toggle:this.toggle,children:(0,f.ih)("Unlink device")}),(0,x.jsxs)(h.Z,{children:[(0,x.jsx)("p",{children:(0,f.ih)("Are you sure you want to unlink this device?")}),(0,x.jsx)(d.Z,{check:!0,children:(0,x.jsxs)(u.Z,{check:!0,children:[(0,x.jsx)(m.Z,{type:"checkbox",checked:this.state.isChecked,onChange:this.onInputChange}),(0,x.jsx)("span",{children:(0,f.ih)("Delete files from this device the next time it comes online.")})]})})]}),(0,x.jsxs)(g.Z,{children:[(0,x.jsx)(p.Z,{color:"secondary",onClick:this.toggle,children:(0,f.ih)("Cancel")}),(0,x.jsx)(p.Z,{color:"primary",onClick:this.executeOperation,children:(0,f.ih)("Unlink")})]})]})}}]),n}(r.Component);t.Z=v},43862:function(e,t,n){var s=n(15671),i=n(43144),a=n(60136),o=n(29388),r=n(47313),l=n(46417),c=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this;return(0,l.jsx)("ul",{className:"nav flex-column user-setting-nav",children:this.props.data.map((function(t,n){return t.show?(0,l.jsx)("li",{className:"nav-item".concat(e.props.curItemID==t.href.substr(1)?" active":""),children:(0,l.jsx)("a",{className:"nav-link",href:t.href,children:t.text})},n):null}))})}}]),n}(r.Component);t.Z=c},36529:function(e,t,n){var s=n(15671),i=n(43144),a=n(60136),o=n(29388),r=n(47313),l=n(1168),c=n(3885),h=n(83854),d=n(61805),u=n(4514),m=n(68396),g=n(24213),p=n(43862),f=n(46417),x=window.app.pageOptions,v=x.avatarURL,b=x.csrfToken,j=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).fileInputChange=function(){if(i.fileInput.current.files.length){var e=i.fileInput.current.files[0],t=e.name;if(-1==t.lastIndexOf("."))return m.Z.danger((0,d.ih)("Please choose an image file."),{duration:5}),!1;var n=t.substr(t.lastIndexOf(".")+1).toLowerCase(),s=["jpg","jpeg","png","gif"];if(-1==s.indexOf(n)){var a=(0,d.ih)("File extensions can only be {placeholder}.").replace("{placeholder}",s.join(", "));return m.Z.danger(a,{duration:5}),!1}if(e.size>1048576){var o=(0,d.ih)("The file is too large. Allowed maximum size is 1MB.");return m.Z.danger(o,{duration:5}),!1}u.I.updateUserAvatar(e,160).then((function(e){i.setState({avatarSrc:e.data.avatar_url}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))}},i.openFileInput=function(){i.fileInput.current.click()},i.handleMouseOver=function(){i.setState({isEditShown:!0})},i.handleMouseOut=function(){i.setState({isEditShown:!1})},i.onEditIconKeyDown=function(e){"Enter"!=e.key&&"Space"!=e.key||e.target.click()},i.state={avatarSrc:v,isEditShown:!1},i.fileInput=r.createRef(),i.form=r.createRef(),i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsxs)("form",{ref:this.form,className:"form-group row",encType:"multipart/form-data",method:"post",action:"".concat(d.ze,"avatar/add/"),children:[(0,f.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:b}),(0,f.jsx)("label",{className:"col-sm-1 col-form-label",children:(0,d.ih)("Avatar:")}),(0,f.jsxs)("div",{className:"col-auto position-relative",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,tabIndex:"0",children:[(0,f.jsx)("img",{src:this.state.avatarSrc,width:"80",height:"80",alt:"",className:"user-avatar"}),(0,f.jsx)("input",{type:"file",name:"avatar",className:"d-none",onChange:this.fileInputChange,ref:this.fileInput}),(0,f.jsx)("span",{className:"avatar-edit fas fa-edit ".concat(!this.state.isEditShown&&"d-none"),onClick:this.openFileInput,role:"button","aria-label":(0,d.ih)("Edit"),tabIndex:"0",onKeyDown:this.onEditIconKeyDown})]})]})}}]),n}(r.Component),w=window.app.pageOptions,k=w.nameLabel,Z=w.enableUpdateUserInfo,C=w.enableUserSetContactEmail,y=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;(0,s.Z)(this,n),(i=t.call(this,e)).handleNameInputChange=function(e){i.setState({name:e.target.value})},i.handleContactEmailInputChange=function(e){i.setState({contactEmail:e.target.value})},i.handleSubmit=function(e){e.preventDefault();var t={name:i.state.name};C&&(t.contact_email=i.state.contactEmail),i.props.updateUserInfo(t)};var a=i.props.userInfo,o=a.contact_email,r=a.login_id,l=a.name;return i.state={contactEmail:o,loginID:r,name:l},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.contactEmail,n=e.loginID,s=e.name;return(0,f.jsxs)("form",{action:"",method:"post",onSubmit:this.handleSubmit,children:[(0,f.jsxs)("div",{className:"form-group row",children:[(0,f.jsx)("label",{className:"col-sm-1 col-form-label",htmlFor:"name",children:k}),(0,f.jsx)("div",{className:"col-sm-5",children:(0,f.jsx)("input",{className:"form-control",id:"name",type:"text",name:"nickname",value:s,disabled:!Z,onChange:this.handleNameInputChange})})]}),n&&(0,f.jsxs)("div",{className:"form-group row",children:[(0,f.jsx)("label",{className:"col-sm-1 col-form-label",htmlFor:"user-name",children:(0,d.ih)("Username:")}),(0,f.jsx)("div",{className:"col-sm-5",children:(0,f.jsx)("input",{className:"form-control",id:"user-name",type:"text",name:"username",value:n,disabled:!0,readOnly:!0})}),(0,f.jsx)("p",{className:"col-sm-5 m-0 input-tip",children:(0,d.ih)("You can use this field at login.")})]}),(t||C)&&(0,f.jsxs)("div",{className:"form-group row",children:[(0,f.jsx)("label",{className:"col-sm-1 col-form-label",htmlFor:"contact-email",children:(0,d.ih)("Contact Email:")}),(0,f.jsx)("div",{className:"col-sm-5",children:(0,f.jsx)("input",{className:"form-control",id:"contact-email",type:"text",name:"contact_email",value:t,disabled:!C,readOnly:!C,onChange:this.handleContactEmailInputChange})}),(0,f.jsx)("p",{className:"col-sm-5 m-0 input-tip",children:(0,d.ih)("Your notifications will be sent to this email.")})]}),(0,f.jsx)("button",{type:"submit",className:"btn btn-outline-primary offset-sm-1",disabled:!Z,children:(0,d.ih)("Submit")})]})}}]),n}(r.Component),D=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).getAuthToken=function(){u.I.getAuthTokenBySession().then((function(e){i.setState({authToken:e.data.token})})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.createAuthToken=function(){u.I.createAuthTokenBySession().then((function(e){i.setState({authToken:e.data.token,isAuthTokenVisible:!1}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.deleteAuthToken=function(){u.I.deleteAuthTokenBySession().then((function(e){i.setState({authToken:"",isAuthTokenVisible:!1}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.toggleAuthTokenVisible=function(){i.setState({isAuthTokenVisible:!i.state.isAuthTokenVisible})},i.onIconKeyDown=function(e){"Enter"!=e.key&&"Space"!=e.key||e.target.click()},i.state={authToken:"",isAuthTokenVisible:!1},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.getAuthToken()}},{key:"render",value:function(){var e=this.state,t=e.authToken,n=e.isAuthTokenVisible;return(0,f.jsx)(r.Fragment,{children:(0,f.jsxs)("div",{id:"get-auth-token",className:"setting-item",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Web API Auth Token")}),t?(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("label",{className:"m-0 mr-2",htmlFor:"token",children:(0,d.ih)("Token:")}),(0,f.jsx)("input",{id:"token",className:"border-0 mr-1",type:"text",value:n?t:"****************************************",readOnly:!0,size:Math.max(t.length,10)}),(0,f.jsx)("span",{tabIndex:"0",role:"button","aria-label":n?(0,d.ih)("Hide"):(0,d.ih)("Show"),onKeyDown:this.onIconKeyDown,onClick:this.toggleAuthTokenVisible,className:"eye-icon fas ".concat(this.state.isAuthTokenVisible?"fa-eye":"fa-eye-slash")})]}),(0,f.jsx)("button",{className:"btn btn-outline-primary mt-2",onClick:this.deleteAuthToken,children:(0,d.ih)("Delete")})]}):(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.createAuthToken,children:(0,d.ih)("Generate")})]})})}}]),n}(r.Component),S=n(68164),N=n(42995),I=n(12756),O=n(12213),P=n(59743),M=n(5684),A=n(76578),T=n(21303),E=n(93869),U=n(7764),R=window.app.pageOptions,L=R.webdavSecretMinLength,_=R.webdavSecretStrengthLevel,F=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).submit=function(){return 0===i.state.password.length?(i.setState({errMsg:(0,d.ih)("Please enter a password.")}),!1):i.state.password.length<L?(i.setState({errMsg:(0,d.ih)("The password is too short.")}),!1):h.c.getStrengthLevel(i.state.password)<_?(i.setState({errMsg:(0,d.ih)("The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.").replace("{passwordStrengthLevel}",_)}),!1):(i.setState({btnDisabled:!0}),void i.props.setPassword(i.state.password.trim()))},i.handleInputChange=function(e){i.setState({password:e.target.value})},i.togglePasswordVisible=function(){i.setState({isPasswordVisible:!i.state.isPasswordVisible})},i.generatePassword=function(){var e=h.c.generatePassword(L);i.setState({password:e})},i.state={password:"",isPasswordVisible:!1,btnDisabled:!1,errMsg:""},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.toggle,t=(0,d.ih)("(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)").replace("{passwordMinLength}",L).replace("{passwordStrengthLevel}",_);return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:e,children:[(0,f.jsx)(I.Z,{toggle:e,children:(0,d.ih)("Set WebDAV Password")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsxs)(P.Z,{children:[(0,f.jsx)(M.Z,{type:this.state.isPasswordVisible?"text":"password",value:this.state.password,onChange:this.handleInputChange,autoComplete:"new-password"}),(0,f.jsxs)(A.Z,{addonType:"append",children:[(0,f.jsx)(T.Z,{onClick:this.togglePasswordVisible,children:(0,f.jsx)("i",{className:"fas ".concat(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})}),(0,f.jsx)(T.Z,{onClick:this.generatePassword,children:(0,f.jsx)("i",{className:"fas fa-magic"})})]})]}),(0,f.jsx)("p",{className:"form-text text-muted m-0",children:t}),this.state.errMsg&&(0,f.jsx)(E.Z,{color:"danger",className:"m-0 mt-2",children:(0,d.ih)(this.state.errMsg)})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:e,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.submit,disabled:this.state.btnDisabled,children:(0,d.ih)("Submit")})]})]})}}]),n}(r.Component),V=window.app.pageOptions,W=V.webdavSecretMinLength,z=V.webdavSecretStrengthLevel,B=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).submit=function(){return 0===i.state.password.length?(i.setState({errMsg:(0,d.ih)("Please enter a password.")}),!1):i.state.password.length<W?(i.setState({errMsg:(0,d.ih)("The password is too short.")}),!1):h.c.getStrengthLevel(i.state.password)<z?(i.setState({errMsg:(0,d.ih)("The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.").replace("{passwordStrengthLevel}",z)}),!1):(i.setState({btnDisabled:!0}),void i.props.resetPassword(i.state.password.trim()))},i.handleInputChange=function(e){i.setState({password:e.target.value})},i.togglePasswordVisible=function(){i.setState({isPasswordVisible:!i.state.isPasswordVisible})},i.generatePassword=function(){var e=h.c.generatePassword(W);i.setState({password:e})},i.state={password:"",isPasswordVisible:!1,btnDisabled:!1,errMsg:""},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.toggle,t=(0,d.ih)("(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)").replace("{passwordMinLength}",W).replace("{passwordStrengthLevel}",z);return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:e,children:[(0,f.jsx)(I.Z,{toggle:e,children:(0,d.ih)("Reset WebDAV Password")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsxs)(P.Z,{children:[(0,f.jsx)(M.Z,{type:this.state.isPasswordVisible?"text":"password",value:this.state.password,onChange:this.handleInputChange,autoComplete:"new-password"}),(0,f.jsxs)(A.Z,{addonType:"append",children:[(0,f.jsx)(T.Z,{onClick:this.togglePasswordVisible,children:(0,f.jsx)("i",{className:"fas ".concat(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})}),(0,f.jsx)(T.Z,{onClick:this.generatePassword,children:(0,f.jsx)("i",{className:"fas fa-magic"})})]})]}),(0,f.jsx)("p",{className:"form-text text-muted m-0",children:t}),this.state.errMsg&&(0,f.jsx)(E.Z,{color:"danger",className:"m-0 mt-2",children:(0,d.ih)(this.state.errMsg)})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:e,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.submit,disabled:this.state.btnDisabled,children:(0,d.ih)("Submit")})]})]})}}]),n}(r.Component),K=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).submit=function(){i.setState({btnDisabled:!0}),i.props.removePassword()},i.state={btnDisabled:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.toggle;return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:e,children:[(0,f.jsx)(I.Z,{toggle:e,children:(0,d.ih)("Delete WebDAV Password")}),(0,f.jsx)(O.Z,{children:(0,f.jsx)("p",{children:(0,d.ih)("Are you sure you want to delete WebDAV password?")})}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:e,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.submit,disabled:this.state.btnDisabled,children:(0,d.ih)("Delete")})]})]})}}]),n}(r.Component),Y=window.app.pageOptions,G=Y.username,H=Y.webdavUrl,q=Y.webdavPasswordSetted,J=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).toggleSetPasswordDialog=function(){i.setState({isSetPasserdDialogOpen:!i.state.isSetPasserdDialogOpen})},i.setPassword=function(e){u.I.updateWebdavSecret(e).then((function(e){i.toggleSetPasswordDialog(),i.setState({isWebdavPasswordSetted:!i.state.isWebdavPasswordSetted}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);i.toggleSetPasswordDialog(),m.Z.danger(t)}))},i.toggleResetPasswordDialog=function(){i.setState({isResetPasswordDialogOpen:!i.state.isResetPasswordDialogOpen})},i.resetPassword=function(e){u.I.updateWebdavSecret(e).then((function(e){i.toggleResetPasswordDialog(),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);i.toggleResetPasswordDialog(),m.Z.danger(t)}))},i.toggleRemovePasswordDialog=function(){i.setState({isRemovePasswordDialogOpen:!i.state.isRemovePasswordDialogOpen})},i.removePassword=function(){u.I.updateWebdavSecret().then((function(e){i.toggleRemovePasswordDialog(),i.setState({isWebdavPasswordSetted:!i.state.isWebdavPasswordSetted}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);i.toggleRemovePasswordDialog(),m.Z.danger(t)}))},i.onIconKeyDown=function(e){"Enter"!=e.key&&"Space"!=e.key||e.target.click()},i.state={isWebdavPasswordSetted:q,isSetPasserdDialogOpen:!1,isResetPasserdDialogOpen:!1,isRemovePasserdDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.state.isWebdavPasswordSetted;return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{id:"update-webdav-passwd",className:"setting-item",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("WebDAV Password")}),(0,f.jsxs)("p",{children:["WebDAV URL: ",(0,f.jsx)("a",{href:H,children:H})]}),(0,f.jsxs)("p",{children:[(0,d.ih)("WebDAV username:")," ",G]}),e?(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("p",{children:[(0,d.ih)("WebDAV password:")," ***"]}),(0,f.jsx)("button",{className:"btn btn-outline-primary mr-2",onClick:this.toggleResetPasswordDialog,children:(0,d.ih)("Reset Password")}),(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.toggleRemovePasswordDialog,children:(0,d.ih)("Delete Password")})]}):(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("p",{children:[(0,d.ih)("WebDAV password:")," ",(0,d.ih)("not set")]}),(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.toggleSetPasswordDialog,children:(0,d.ih)("Set Password")})]})]}),this.state.isSetPasserdDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(F,{setPassword:this.setPassword,toggle:this.toggleSetPasswordDialog})}),this.state.isResetPasswordDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(B,{resetPassword:this.resetPassword,toggle:this.toggleResetPasswordDialog})}),this.state.isRemovePasswordDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(K,{removePassword:this.removePassword,toggle:this.toggleRemovePasswordDialog})})]})}}]),n}(r.Component),Q=n(32959),X=window.app.pageOptions,$=X.currentLang,ee=X.langList,te=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSelectChange=function(e){location.href="".concat(d.ze,"i18n/?lang=").concat(e.value)},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=ee.map((function(e,t){return{value:e.langCode,label:e.langName}}));return(0,f.jsxs)("div",{className:"setting-item",id:"lang-setting",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Language Setting")}),(0,f.jsx)(Q.ME,{className:"language-selector",value:{value:$.langCode,label:$.langName},options:e,onChange:this.onSelectChange})]})}}]),n}(r.Component),ne=te,se=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;(0,s.Z)(this,n),(i=t.call(this,e)).handleInputChange=function(e){var t=e.target.checked;i.setState({inputChecked:t}),i.props.updateUserInfo({list_in_address_book:t.toString()})};var a=i.props.userInfo.list_in_address_book;return i.state={inputChecked:a},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.state.inputChecked;return(0,f.jsxs)("div",{className:"setting-item",id:"list-in-address-book",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Global Address Book")}),(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("input",{type:"checkbox",id:"list-in-address-book",name:"list_in_address_book",className:"mr-1",checked:e,onChange:this.handleInputChange}),(0,f.jsx)("label",{htmlFor:"list-in-address-book",className:"m-0",children:(0,d.ih)("List your account in global address book, so that others can find you by typing your name.")})]})]})}}]),n}(r.Component),ie=se,ae=window.app.pageOptions,oe=ae.fileUpdatesEmailInterval,re=ae.collaborateEmailInterval,le=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).inputFileUpdatesEmailIntervalChange=function(e){e.target.checked&&i.setState({fileUpdatesEmailInterval:parseInt(e.target.value)})},i.inputCollaborateEmailIntervalChange=function(e){e.target.checked&&i.setState({collaborateEmailInterval:parseInt(e.target.value)})},i.formSubmit=function(e){e.preventDefault();var t=i.state,n=t.fileUpdatesEmailInterval,s=t.collaborateEmailInterval;u.I.updateEmailNotificationInterval(n,s).then((function(e){m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.fileUpdatesOptions=[{interval:0,text:(0,d.ih)("Don't send emails")},{interval:3600,text:(0,d.ih)("Per hour")},{interval:14400,text:(0,d.ih)("Per 4 hours")},{interval:86400,text:(0,d.ih)("Per day")},{interval:604800,text:(0,d.ih)("Per week")}],i.collaborateOptions=[{interval:0,text:(0,d.ih)("Don't send emails")},{interval:3600,text:(0,d.ih)("Per hour")+" ("+(0,d.ih)("If notifications have not been read within one hour, they will be sent to your mailbox.")+")"}],i.state={fileUpdatesEmailInterval:oe,collaborateEmailInterval:re},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.fileUpdatesEmailInterval,s=t.collaborateEmailInterval;return(0,f.jsxs)("div",{className:"setting-item",id:"email-notice",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Email Notification")}),(0,f.jsx)("h6",{className:"",children:(0,d.ih)("Notifications of file changes")}),(0,f.jsx)("p",{className:"mb-1",children:(0,d.ih)("The list of added, deleted and modified files will be sent to your mailbox.")}),(0,f.jsx)("form",{method:"post",action:"",id:"set-email-notice-interval-form",onSubmit:this.formSubmit,children:this.fileUpdatesOptions.map((function(t,s){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)("input",{type:"radio",name:"interval",value:t.interval,className:"align-middle",id:"file-updates-interval-option".concat(s+1),checked:n==t.interval,onChange:e.inputFileUpdatesEmailIntervalChange}),(0,f.jsx)("label",{className:"align-middle m-0 ml-2",htmlFor:"interval-option".concat(s+1),children:t.text}),(0,f.jsx)("br",{})]},"file-updates-".concat(s))}))}),(0,f.jsx)("h6",{className:"mt-4",children:(0,d.ih)("Notifications of collaboration")}),(0,f.jsx)("p",{className:"mb-1",children:(0,d.ih)("Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.")}),(0,f.jsx)("form",{method:"post",action:"",id:"set-email-notice-interval-form",onSubmit:this.formSubmit,children:this.collaborateOptions.map((function(t,n){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)("input",{type:"radio",name:"interval",value:t.interval,className:"align-middle",id:"collaborate-interval-option".concat(n+1),checked:s==t.interval,onChange:e.inputCollaborateEmailIntervalChange}),(0,f.jsx)("label",{className:"align-middle m-0 ml-2",htmlFor:"interval-option".concat(n+1),children:t.text}),(0,f.jsx)("br",{})]},"collaborate-".concat(n))}))}),(0,f.jsx)("button",{type:"submit",className:"btn btn-outline-primary mt-2",onClick:this.formSubmit,children:(0,d.ih)("Submit")})]})}}]),n}(r.Component),ce=le,he=window.app.pageOptions,de=he.defaultDevice,ue=he.backupTokens,me=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).renderEnabled=function(){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)("p",{className:"mb-2",children:(0,d.ih)("Status: enabled")}),(0,f.jsx)("a",{className:"btn btn-outline-primary mb-4",href:"".concat(d.ze,"profile/two_factor_authentication/disable/"),children:(0,d.ih)("Disable Two-Factor Authentication")}),(0,f.jsxs)("p",{className:"mb-2",children:[(0,d.ih)("If you don't have any device with you, you can access your account using backup codes."),1==ue?(0,d.ih)("You have only one backup code remaining."):(0,d.ih)("You have {num} backup codes remaining.").replace("{num}",ue)]}),(0,f.jsx)("a",{href:"".concat(d.ze,"profile/two_factor_authentication/backup/tokens/"),className:"btn btn-outline-primary",children:(0,d.ih)("Show Codes")})]})},i.renderDisabled=function(){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)("p",{className:"mb-2",children:(0,d.ih)("Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.")}),(0,f.jsx)("a",{href:"".concat(d.ze,"profile/two_factor_authentication/setup/"),className:"btn btn-outline-primary",children:(0,d.ih)("Enable Two-Factor Authentication")})]})},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsxs)("div",{className:"setting-item",id:"two-factor-auth",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Two-Factor Authentication")}),de?this.renderEnabled():this.renderDisabled()]})}}]),n}(r.Component),ge=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).disconnect=function(){i.form.current.submit()},i.form=r.createRef(),i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.formActionURL,n=e.csrfToken,s=e.toggle;return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:s,children:[(0,f.jsx)(I.Z,{toggle:s,children:(0,d.ih)("Disconnect")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsx)("p",{children:(0,d.ih)("Are you sure you want to disconnect?")}),(0,f.jsx)("form",{ref:this.form,className:"d-none",method:"post",action:t,children:(0,f.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:n})})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:s,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.disconnect,children:(0,d.ih)("Disconnect")})]})]})}}]),n}(r.Component),pe=ge,fe=window.app.pageOptions,xe=fe.csrfToken,ve=fe.langCode,be=fe.socialConnected,je=fe.socialNextPage,we=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).confirmDisconnect=function(){i.setState({isConfirmDialogOpen:!0})},i.toggleDialog=function(){i.setState({isConfirmDialogOpen:!i.state.isConfirmDialogOpen})},i.state={isConfirmDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{className:"setting-item",id:"social-auth",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Social Login")}),(0,f.jsx)("p",{className:"mb-2",children:"zh-cn"==ve?"\u4f01\u4e1a\u5fae\u4fe1":"WeChat Work"}),be?(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.confirmDisconnect,children:(0,d.ih)("Disconnect")}):(0,f.jsx)("a",{href:"".concat(d.ze,"work-weixin/oauth-connect/?next=").concat(encodeURIComponent(je)),className:"btn btn-outline-primary",children:(0,d.ih)("Connect")})]}),this.state.isConfirmDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(pe,{formActionURL:"".concat(d.ze,"work-weixin/oauth-disconnect/?next=").concat(encodeURIComponent(je)),csrfToken:xe,toggle:this.toggleDialog})})]})}}]),n}(r.Component),ke=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).disconnect=function(){i.form.current.submit()},i.form=r.createRef(),i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.formActionURL,n=e.csrfToken,s=e.toggle;return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:s,children:[(0,f.jsx)(I.Z,{toggle:s,children:(0,d.ih)("Disconnect")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsx)("p",{children:(0,d.ih)("Are you sure you want to disconnect?")}),(0,f.jsx)("form",{ref:this.form,className:"d-none",method:"post",action:t,children:(0,f.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:n})})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:s,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.disconnect,children:(0,d.ih)("Disconnect")})]})]})}}]),n}(r.Component),Ze=ke,Ce=window.app.pageOptions,ye=Ce.csrfToken,De=Ce.langCode,Se=Ce.socialConnectedDingtalk,Ne=Ce.socialNextPage,Ie=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).confirmDisconnect=function(){i.setState({isConfirmDialogOpen:!0})},i.toggleDialog=function(){i.setState({isConfirmDialogOpen:!i.state.isConfirmDialogOpen})},i.state={isConfirmDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{className:"setting-item",id:"social-auth",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Social Login")}),(0,f.jsx)("p",{className:"mb-2",children:"zh-cn"==De?"\u9489\u9489":"Dingtalk"}),Se?(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.confirmDisconnect,children:(0,d.ih)("Disconnect")}):(0,f.jsx)("a",{href:"".concat(d.ze,"dingtalk/connect/?next=").concat(encodeURIComponent(Ne)),className:"btn btn-outline-primary",children:(0,d.ih)("Connect")})]}),this.state.isConfirmDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(Ze,{formActionURL:"".concat(d.ze,"dingtalk/disconnect/?next=").concat(encodeURIComponent(Ne)),csrfToken:ye,toggle:this.toggleDialog})})]})}}]),n}(r.Component),Oe=window.app.pageOptions,Pe=Oe.csrfToken,Me=Oe.isOrgContext,Ae=Oe.orgID,Te=Oe.samlConnected,Ee=Oe.enableMultiADFS,Ue=Oe.orgSamlConnected,Re=Oe.socialNextPage,Le=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).confirmDisconnect=function(){i.setState({isConfirmDialogOpen:!0})},i.disconnect=function(){i.form.current.submit()},i.toggleDialog=function(){i.setState({isConfirmDialogOpen:!i.state.isConfirmDialogOpen})},i.form=r.createRef(),i.state={isConfirmDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=Ee&&Me?"".concat(d.ze,"org/custom/").concat(Ae,"/saml2/connect/?next=").concat(encodeURIComponent(Re)):"".concat(d.ze,"saml2/connect/?next=").concat(encodeURIComponent(Re)),t=Ue&&Me?"".concat(d.ze,"org/custom/").concat(Ae,"/saml2/disconnect/?next=").concat(encodeURIComponent(Re)):"".concat(d.ze,"saml2/disconnect/?next=").concat(encodeURIComponent(Re));return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{className:"setting-item",id:"social-auth",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Social Login")}),(0,f.jsx)("p",{className:"mb-2",children:"SAML"}),Te||Ue&&Me?(0,f.jsx)("button",{className:"btn btn-outline-primary",onClick:this.confirmDisconnect,children:(0,d.ih)("Disconnect")}):(0,f.jsx)("a",{href:e,className:"btn btn-outline-primary",children:(0,d.ih)("Connect")})]}),this.state.isConfirmDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:this.toggleDialog,children:[(0,f.jsx)(I.Z,{toggle:this.toggleDialog,children:(0,d.ih)("Disconnect")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsx)("p",{children:(0,d.ih)("Are you sure you want to disconnect?")}),(0,f.jsx)("form",{ref:this.form,className:"d-none",method:"post",action:t,children:(0,f.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:Pe})})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:this.toggleDialog,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.disconnect,children:(0,d.ih)("Disconnect")})]})]})})]})}}]),n}(r.Component),_e=n(70816),Fe=n.n(_e),Ve=n(13380),We=n(25417),ze=n(57124),Be=n(99338),Ke=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,s=e.items;if(t)return(0,f.jsx)("span",{className:"loading-icon loading-tip"});if(n)return(0,f.jsx)("p",{className:"error text-center",children:n});var i=(0,f.jsx)("p",{children:(0,d.ih)("No linked devices. You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.")}),a=(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{width:"13%",children:(0,d.ih)("Platform")}),(0,f.jsx)("th",{width:"30%",children:(0,d.ih)("Device Name")}),(0,f.jsx)("th",{width:"30%",children:(0,d.ih)("IP")}),(0,f.jsx)("th",{width:"17%",children:(0,d.ih)("Last Access")}),(0,f.jsx)("th",{width:"10%"})]})}),o=(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{width:"92%"}),(0,f.jsx)("th",{width:"8%"})]})}),r=h.c.isDesktop();return s.length?(0,f.jsxs)("table",{className:"table-hover ".concat(r?"":"table-thead-hidden"),children:[r?a:o,(0,f.jsx)("tbody",{children:s.map((function(e,t){return(0,f.jsx)(Ye,{data:e,isDesktop:r},t)}))})]}):i}}]),n}(r.Component),Ye=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).toggleOpMenu=function(){i.setState({isOpMenuOpen:!i.state.isOpMenuOpen})},i.handleMouseOver=function(){i.setState({isOpIconShown:!0})},i.handleMouseOut=function(){i.setState({isOpIconShown:!1})},i.toggleDialog=function(){i.setState({isConfirmUnlinkDialogOpen:!i.state.isConfirmUnlinkDialogOpen})},i.handleClick=function(e){if(e.preventDefault(),i.props.data.is_desktop_client)i.toggleDialog();else{i.unlinkDevice(!0)}},i.unlinkDevice=function(e){var t=i.props.data;u.I.unlinkDevice(t.platform,t.device_id,e).then((function(e){i.setState({unlinked:!0});var n=(0,d.ih)("Successfully unlinked %(name)s.");n=n.replace("%(name)s",t.device_name),m.Z.success(n)})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.state={isOpMenuOpen:!1,isOpIconShown:!1,unlinked:!1,isConfirmUnlinkDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){if(this.state.unlinked)return null;var e=this.props.data,t="sf3-font-delete1 sf3-font unlink-device action-icon";t+=this.state.isOpIconShown?"":" invisible";var n=(0,f.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onFocus:this.handleMouseOver,children:[(0,f.jsx)("td",{children:e.platform}),(0,f.jsx)("td",{children:e.device_name}),(0,f.jsx)("td",{children:e.last_login_ip}),(0,f.jsx)("td",{children:Fe()(e.last_accessed).fromNow()}),(0,f.jsx)("td",{children:(0,f.jsx)("a",{href:"#",className:t,title:(0,d.ih)("Unlink"),role:"button","aria-label":(0,d.ih)("Unlink"),onClick:this.handleClick})})]}),s=(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{children:[e.device_name,(0,f.jsx)("br",{}),(0,f.jsx)("span",{className:"item-meta-info",children:e.last_login_ip}),(0,f.jsx)("span",{className:"item-meta-info",children:Fe()(e.last_accessed).fromNow()}),(0,f.jsx)("span",{className:"item-meta-info",children:e.platform})]}),(0,f.jsx)("td",{children:(0,f.jsxs)(Ve.Z,{isOpen:this.state.isOpMenuOpen,toggle:this.toggleOpMenu,children:[(0,f.jsx)(We.Z,{tag:"i",className:"sf-dropdown-toggle fa fa-ellipsis-v ml-0",title:(0,d.ih)("More operations"),"aria-label":(0,d.ih)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isOpMenuOpen}),(0,f.jsxs)("div",{className:this.state.isOpMenuOpen?"":"d-none",onClick:this.toggleOpMenu,children:[(0,f.jsx)("div",{className:"mobile-operation-menu-bg-layer"}),(0,f.jsx)("div",{className:"mobile-operation-menu",children:(0,f.jsx)(ze.Z,{className:"mobile-menu-item",onClick:this.handleClick,children:(0,d.ih)("Unlink")})})]})]})})]});return(0,f.jsxs)(r.Fragment,{children:[this.props.isDesktop?n:s,this.state.isConfirmUnlinkDialogOpen&&(0,f.jsx)(Be.Z,{executeOperation:this.unlinkDevice,toggleDialog:this.toggleDialog})]})}}]),n}(r.Component),Ge=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).state={loading:!0,errorMsg:"",items:[]},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;u.I.listLinkedDevices().then((function(t){e.setState({loading:!1,items:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:h.c.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.errorMsg,s=e.items;return(0,f.jsxs)("div",{className:"setting-item",id:"linked-devices",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Linked Devices")}),(0,f.jsx)("div",{className:"cur-view-content",children:(0,f.jsx)(Ke,{loading:t,errorMsg:n,items:s})})]})}}]),n}(r.Component),He=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).action=function(){i.form.current.submit()},i.form=r.createRef(),i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.formActionURL,n=e.csrfToken,s=e.toggle;return(0,f.jsxs)(N.Z,{centered:!0,isOpen:!0,toggle:s,children:[(0,f.jsx)(I.Z,{toggle:s,children:(0,d.ih)("Delete Account")}),(0,f.jsxs)(O.Z,{children:[(0,f.jsx)("p",{children:(0,d.ih)("Really want to delete your account?")}),(0,f.jsx)("form",{ref:this.form,className:"d-none",method:"post",action:t,children:(0,f.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:n})})]}),(0,f.jsxs)(U.Z,{children:[(0,f.jsx)(T.Z,{color:"secondary",onClick:s,children:(0,d.ih)("Cancel")}),(0,f.jsx)(T.Z,{color:"primary",onClick:this.action,children:(0,d.ih)("Delete")})]})]})}}]),n}(r.Component),qe=He,Je=window.app.pageOptions.csrfToken,Qe=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).confirmDelete=function(e){e.preventDefault(),i.setState({isConfirmDialogOpen:!0})},i.toggleDialog=function(){i.setState({isConfirmDialogOpen:!i.state.isConfirmDialogOpen})},i.state={isConfirmDialogOpen:!1},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)("div",{className:"setting-item",id:"del-account",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Delete Account")}),(0,f.jsx)("p",{className:"mb-2",children:(0,d.ih)("This operation will not be reverted. Please think twice!")}),(0,f.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:this.confirmDelete,children:(0,d.ih)("Delete")})]}),this.state.isConfirmDialogOpen&&(0,f.jsx)(S.Z,{children:(0,f.jsx)(qe,{formActionURL:"".concat(d.ze,"profile/delete/"),csrfToken:Je,toggle:this.toggleDialog})})]})}}]),n}(r.Component),Xe=(n(98391),n(53379),n(69552),window.app.pageOptions),$e=Xe.canUpdatePassword,et=Xe.passwordOperationText,tt=Xe.enableGetAuthToken,nt=Xe.enableWebdavSecret,st=Xe.enableAddressBook,it=Xe.twoFactorAuthEnabled,at=Xe.enableWechatWork,ot=Xe.enableDingtalk,rt=Xe.isOrgContext,lt=Xe.enableADFS,ct=Xe.enableMultiADFS,ht=Xe.enableDeleteAccount,dt=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).updateUserInfo=function(e){u.I.updateUserInfo(e).then((function(e){i.setState({userInfo:e.data}),m.Z.success((0,d.ih)("Success"))})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))},i.onSearchedClick=function(e){if(!0===e.is_dir){var t=d.ze+"library/"+e.repo_id+"/"+e.repo_name+e.path;(0,c.c4)(t,{repalce:!0})}else{var n=d.ze+"lib/"+e.repo_id+"/file"+h.c.encodePath(e.path);window.open("about:blank").location.href=n}},i.handleContentScroll=function(e){var t=e.target.scrollTop,n=i.sideNavItems.filter((function(e,n){return e.show&&document.getElementById(e.href.substr(1)).offsetTop-45<t}));n.length&&i.setState({curItemID:n[n.length-1].href.substr(1)})},i.sideNavItems=[{show:!0,href:"#user-basic-info",text:(0,d.ih)("Profile")},{show:$e,href:"#update-user-passwd",text:(0,d.ih)("Password")},{show:tt,href:"#get-auth-token",text:(0,d.ih)("Web API Auth Token")},{show:nt,href:"#update-webdav-passwd",text:(0,d.ih)("WebDav Password")},{show:st,href:"#list-in-address-book",text:(0,d.ih)("Global Address Book")},{show:!0,href:"#lang-setting",text:(0,d.ih)("Language")},{show:d._y,href:"#email-notice",text:(0,d.ih)("Email Notification")},{show:it,href:"#two-factor-auth",text:(0,d.ih)("Two-Factor Authentication")},{show:at||ot||lt||ct||rt,href:"#social-auth",text:(0,d.ih)("Social Login")},{show:!0,href:"#linked-devices",text:(0,d.ih)("Linked Devices")},{show:ht,href:"#del-account",text:(0,d.ih)("Delete Account")}],i.state={curItemID:i.sideNavItems[0].href.substr(1)},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;u.I.getUserInfo().then((function(t){e.setState({userInfo:t.data})})).catch((function(e){var t=h.c.getErrorMsg(e);m.Z.danger(t)}))}},{key:"render",value:function(){return(0,f.jsx)(r.Fragment,{children:(0,f.jsxs)("div",{className:"h-100 d-flex flex-column",children:[(0,f.jsxs)("div",{className:"top-header d-flex justify-content-between",children:[(0,f.jsx)("a",{href:d.ze,children:(0,f.jsx)("img",{src:d.si+d.j1,height:d.AN,width:d.Bv,title:d.y7,alt:"logo"})}),(0,f.jsx)(g.Z,{onSearchedClick:this.onSearchedClick})]}),(0,f.jsxs)("div",{className:"flex-auto d-flex o-hidden",children:[(0,f.jsx)("div",{className:"side-panel o-auto",children:(0,f.jsx)(p.Z,{data:this.sideNavItems,curItemID:this.state.curItemID})}),(0,f.jsxs)("div",{className:"main-panel d-flex flex-column",children:[(0,f.jsx)("h2",{className:"heading",children:(0,d.ih)("Settings")}),(0,f.jsxs)("div",{className:"content position-relative",onScroll:this.handleContentScroll,children:[(0,f.jsxs)("div",{id:"user-basic-info",className:"setting-item",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Profile Setting")}),(0,f.jsx)(j,{}),this.state.userInfo&&(0,f.jsx)(y,{userInfo:this.state.userInfo,updateUserInfo:this.updateUserInfo})]}),$e&&(0,f.jsxs)("div",{id:"update-user-passwd",className:"setting-item",children:[(0,f.jsx)("h3",{className:"setting-item-heading",children:(0,d.ih)("Password")}),(0,f.jsx)("a",{href:"".concat(d.ze,"accounts/password/change/"),className:"btn btn-outline-primary",children:et})]}),tt&&(0,f.jsx)(D,{}),nt&&(0,f.jsx)(J,{}),st&&this.state.userInfo&&(0,f.jsx)(ie,{userInfo:this.state.userInfo,updateUserInfo:this.updateUserInfo}),(0,f.jsx)(ne,{}),(d._y||!d.m_)&&(0,f.jsx)(ce,{}),it&&(0,f.jsx)(me,{}),at&&(0,f.jsx)(we,{}),ot&&(0,f.jsx)(Ie,{}),(lt||ct&&rt)&&(0,f.jsx)(Le,{}),(0,f.jsx)(Ge,{}),ht&&(0,f.jsx)(Qe,{})]})]})]})]})})}}]),n}(r.Component);l.render((0,f.jsx)(dt,{}),document.getElementById("wrapper"))},69552:function(){}},function(e){e.O(0,[9351],(function(){return t=36529,e(e.s=t);var t}));e.O()}]);